const timer=new pomoTimer;let docTitle=document.title;function setCircleDashArray(e){document.querySelector("#base-timer-path-remaining").setAttribute("stroke-dasharray",`${(283*e).toFixed(0)} 283`)}function setTimerColor(e){document.querySelector("#base-timer-path-remaining").style.stroke=null==e?"green":e}function msToTime(e){function t(e,t){return("00"+e).slice(-(t=t||2))}var o=(e=(e-e%1e3)/1e3)%60,r=(e=(e-o)/60)%60;return t(r)+":"+t(o)}window.onblur=function(){timer.setBlured(!0)},window.onfocus=function(){timer.setBlured(!1),document.title=docTitle},window.addEventListener("load",(()=>{setTimerColor("var(--background-color)"),document.querySelector("#todo-add-button").addEventListener("click",(()=>{if("block"===document.querySelector("#leaderboard").style.display||"block"===document.querySelector("#login").style.display)return;const e=document.querySelector("#popup");"block"!==e.style.display&&(e.style.animation="popupOpenAnimation 0.5s forwards",e.style.display="block",document.querySelector("main").classList.add("blur-filter"))})),document.querySelector("#todo-close-popup").addEventListener("click",(()=>{const e=document.querySelector("#popup");e.style.animation="popupCloseAnimation 0.5s forwards",setTimeout((function(){e.style.display="none"}),500),document.querySelector("main").classList.remove("blur-filter")})),document.querySelector("#leaderboardButton").addEventListener("click",(()=>{if("block"===document.querySelector("#popup").style.display||"block"===document.querySelector("#login").style.display)return;const e=document.querySelector("#leaderboard");"block"!==e.style.display&&(e.style.animation="popupOpenAnimation 0.5s forwards",e.style.display="grid",document.querySelector("main").classList.add("blur-filter"))})),document.querySelector("#leaderboard-close-popup").addEventListener("click",(()=>{const e=document.querySelector("#leaderboard");e.style.animation="popupCloseAnimation 0.5s forwards",setTimeout((function(){e.style.display="none"}),500),document.querySelector("main").classList.remove("blur-filter")})),document.querySelector("#loginButton").addEventListener("click",(()=>{if("block"===document.querySelector("#popup").style.display||"block"===document.querySelector("#leaderboard").style.display)return;const e=document.querySelector("#login");"block"!==e.style.display&&(e.style.animation="popupOpenAnimation 0.5s forwards",e.style.display="block",document.querySelector("main").classList.add("blur-filter"))})),document.querySelector("#login-close-popup").addEventListener("click",(()=>{const e=document.querySelector("#login");e.style.animation="popupCloseAnimation 0.5s forwards",setTimeout((function(){e.style.display="none"}),500),document.querySelector("main").classList.remove("blur-filter")})),document.querySelector("#goToRegister").addEventListener("click",(e=>{e.preventDefault(),document.querySelector("#registrationPage").classList.remove("hide"),document.querySelector("#loginPage").classList.add("hide")})),document.querySelector("#goToLogin").addEventListener("click",(e=>{e.preventDefault(),document.querySelector("#registrationPage").classList.add("hide"),document.querySelector("#loginPage").classList.remove("hide")})),document.querySelector("#loginForm").addEventListener("submit",(e=>{e.preventDefault()})),document.querySelector("#addTodoButton").addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector("#todo-input"),o=t.value;if(""!==o.trim()){const e=document.createElement("div");e.classList.add("todo-item-container");const r=document.createElement("div");r.classList.add("todo-text"),r.textContent=o,e.appendChild(r);const n=document.createElement("div");n.classList.add("todo-item"),n.appendChild(e),document.querySelector(".todo-list-container").appendChild(n),t.value="",document.querySelector("#popup").style.display="none",document.querySelector("main").classList.remove("blur-filter")}}));var e=0,t=0;const o=[25,5,25,5,25,5,25,15];let r;document.querySelector("#startButton").addEventListener("click",(()=>{if(!timer.isActive()){0===timer.getCurrentPositionMS()?(setTimerColor("var(--accent-color)"),r=1e3*o[t],timer.setTimerLength(r).startTimer()):timer.startTimer();const n=timer.timerLengthMS/2,i=timer.timerLengthMS/4,l=setInterval((()=>{-1e3===timer.getCurrentPositionMS()?(clearInterval(l),timer.stopTimer(),timer.setCurrentPositionMS(0),t<7?t++:(t=0,e++,document.querySelector("#pomoCounter").textContent=e)):timer.getCurrentPositionMS()<i?setTimerColor("var(--background-color)"):timer.getCurrentPositionMS()<n&&setTimerColor("orange")}),1e3)}})),document.querySelector("#pauseButton").addEventListener("click",(()=>{timer.stopTimer()}))}));